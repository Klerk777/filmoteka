{"mappings":"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","sources":["src/js/api-service/filmoteka-api.js","src/templates/slider-films.hbs","src/js/main-page/spiner.js","src/js/main-page/slider-film.js","src/js/main-page/gallery.js","src/js/main-page/search.js","src/js/closeModal.js","src/js/modal-info/modal-creat-element.js","src/js/modal-info/modalInfoFilm.js"],"sourcesContent":["const API_KEY = '431ab85139813dba3796c445694ce723';\nconst BASE_URL = 'https://api.themoviedb.org/3';\n\nexport default class FilmotekaApi {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  globalFetch(url) {\n    return fetch(url)\n      .then(response => response.json())\n      .then(date => {\n        this.incrementPage();\n        return date.results;\n      });\n  }\n  fetchGenres() {\n    const url = `${BASE_URL}/genre/movie/list?api_key=${API_KEY}`;\n    return fetch(url)\n      .then(response => response.json())\n      .then(data => {\n        return data.genres;\n      });\n  }\n\n  fetchInTrendFilmWithGenres() {\n    return this.fetchTrendFilm().then(data => {\n      return this.fetchGenres().then(genresList => {\n        return data.map(movie => ({\n          ...movie,\n          release_date: movie.release_date.split('-')[0],\n          genres: movie.genre_ids.map(id => genresList.filter(el => el.id === id)).flat(),\n        }));\n      });\n    });\n  }\n\n  fetchSearchFilmWithGenres() {\n    return this.fetchSearchFilm().then(data => {\n      return this.fetchGenres().then(genresList => {\n        return data.map(movie => ({\n          ...movie,\n          release_date: movie.release_date.split('-')[0],\n          genres: movie.genre_ids.map(id => genresList.filter(el => el.id === id)).flat(),\n        }));\n      });\n    });\n  }\n\n  fetchTrendFilm() {\n    const url = `${BASE_URL}/movie/popular?api_key=${API_KEY}&language=en-US&page=${this.page}`;\n    return this.globalFetch(url);\n  }\n\n  fetchSearchFilm() {\n    const url = `${BASE_URL}/search/movie?api_key=${API_KEY}&language=en-US&query=${this.searchQuery}&page=${this.page}&include_adult=false`;\n    return this.globalFetch(url);\n  }\n   fetchSearchTotalFilm() {\n    const url = `${BASE_URL}/search/movie?api_key=${API_KEY}&language=en-US&query=${this.searchQuery}&page=${this.page}&include_adult=false`;\n    return fetch(url)\n      .then(response => response.json())\n      .then(data => {\n        this.incrementPage();\n        return data;\n      });\n  }\n\n  // fetchInfoFilm() {\n  //   const movie_id = 1031653;\n  //   const url = ` https://api.themoviedb.org/3/movie/${movie_id}?api_key=${API_KEY}&language=en-US`;\n  //   return this.globalFetch(url);\n  // }\n\n  fetchInfoFilm(movie_id) {\n\n    const url = ` https://api.themoviedb.org/3/movie/${movie_id}?api_key=${API_KEY}&language=en-US`;\n    return fetch(url)\n        .then(response => response.json())\n        .then(data => {\n            return data;\n            // console.log(data);\n        })\n}\n\n\nfetchTrailreFilm(movie_id, lang) {\n  const url = ` https://api.themoviedb.org/3/movie/${movie_id}/videos?api_key=${API_KEY}&language=${lang}`;\n  return fetch(url)\n      .then(response => response.json())\n      .then(data => {\n          return data;\n          // console.log(data);\n      })\n}\n\n\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  decrementPage() {\n    this.page -= 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n  get pageNum() {\n    return this.page;\n  }\n  set pageNum(newPage) {\n    this.page = newPage;\n  }\n}\n","{{#each this}}\n   <div class=\"slider-element\">\n        <img class=\"slider-image\" src=\"https://image.tmdb.org/t/p/w500{{poster_path}}\" alt=\"{{title}} {{name}} \"\n            data-id=\"{{id}}\"\n            onerror=\"this.onerror=null;this.src='https://ik.imagekit.io/tc8jxffbcvf/default-movie-portrait_EmJUj9Tda5wa.jpg?tr=fo-auto,di-';\" />\n    </div>\n{{/each}}","import { Loading } from 'notiflix';\n\nexport function loadingSpiner() {\n    Loading.standard('Loading...', {\n        backgroundColor: 'rgba(0,0,0,0.8)',\n        svgColor: '#FF6B08',\n        messageColor: '#FF6B08'\n});\n}","import FilmotekaApi from '../api-service/filmoteka-api';\nimport filmsCardSliderTpl from '../../templates/slider-films.hbs';\nimport { Loading } from 'notiflix';\nimport { loadingSpiner } from './spiner';\n\nconst refs = {\n  sliderContainer: document.querySelector('.slide-track'),\n};\nconst filmotekaApi = new FilmotekaApi();\nrenderTrendy();\n\nexport function renderTrendy() {\n  loadingSpiner();\n  filmotekaApi\n    .fetchTrendFilm()\n    .then(renderSliderFilms)\n    .catch(err => {\n      refs.sliderContainer.innerHTML = `<img class=\"catch-error-pagination\" src=\"${errorUrl}\" />`;\n    });\n  Loading.remove();\n}\n\n\n\nfunction renderSliderFilms(articles) {\n  refs.sliderContainer.innerHTML = filmsCardSliderTpl(articles);\n \n}","import FilmotekaApi from '../api-service/filmoteka-api';\nimport filmsCardTpl from '../../templates/card-films.hbs';\n\n\n\nconst refs = {\n   containerList: document.querySelector('.js-card'),\n}\nconst filmotekaApi = new FilmotekaApi();\nrenderHomepage();\n\nexport function renderHomepage() {\n  filmotekaApi.fetchInTrendFilmWithGenres().then(appendResultsMarkup);\n}\n\nfunction appendResultsMarkup(results) {\n  refs.containerList.innerHTML = filmsCardTpl(results);\n}\n","\nimport { renderTrendy } from './slider-film';\nimport FilmotekaApi from '../api-service/filmoteka-api';\nimport { renderHomepage } from './gallery';\nimport filmsCardTpl from '../../templates/card-films.hbs';\nimport { Loading } from 'notiflix';\nimport { loadingSpiner } from './spiner';\n\nconst refs = {\n    searchForm: document.querySelector('.js-search-form'),\n    containerList: document.querySelector('.js-card'),\n    containerWarning: document.querySelector('.js-warning'),\n    containerWarningResults: document.querySelector('.js-search-results'),\n    \n}\n\nrenderTrendy();\nrenderHomepage();\n\nconst filmotekaApi = new FilmotekaApi();\n\nrefs.searchForm.addEventListener('submit', onSearch);\n\n function onSearch(evt) {\n    evt.preventDefault();\n     loadingSpiner();\n    clearHomePage();\n     if (evt.currentTarget.query.value === '') {\n         renderHomepage();\n         Loading.remove();\n        refs.containerWarning.textContent = `Please write something ...`;\n        return;\n    } else {\n         refs.containerWarning.textContent = '';\n    }\n     console.log(evt.currentTarget.query.value);\n     Loading.remove();\n    filmotekaApi.query = evt.currentTarget.query.value;\n  \n     filmotekaApi.resetPage();\n     filmotekaApi.fetchSearchTotalFilm().then(data => {\n         if (data.total_pages === 0) {\n             renderHomepage();\n             refs.containerWarningResults.textContent = `Sorry, there no results found. Try searching for something else! `;\n         } else {\n             refs.containerWarningResults.textContent = '';\n             filmotekaApi.fetchSearchFilmWithGenres().then(appendResultsMarkup).catch(err => {\n                 refs.containerList.innerHTML = `<img class=\"catch-error-pagination\" src=\"${errorUrl}\"/>`\n             });\n            \n         }\n     })\n     evt.currentTarget.query.value = '';\n   \n}\n\n\nfunction appendResultsMarkup(results) {\n  refs.containerList.innerHTML = filmsCardTpl(results);\n  \n}\nfunction clearHomePage() {\n    refs.containerList.innerHTML = '';\n}","import { currentUser } from './api-service/firebase-api-auth';\nimport { writeQueue, writeWatched } from './api-service/firebase-api-database';\nimport FilmotekaApi from './api-service/filmoteka-api';\n\nconst infoFilmApi = new FilmotekaApi();\nconst refs = {\n  backdrop: document.querySelector('.backdrop'),\n  closeBtn: document.querySelector('[data-modal-close]'),\n};\n\nrefs.backdrop.addEventListener('click', onBackdropHandler);\nrefs.closeBtn.addEventListener('click', closeModal);\nwindow.addEventListener('keydown', closeModalEsc);\n// TODO: add listener on ESC when modal is opening\n\nfunction closeModal() {\n  refs.backdrop.classList.remove('is-open');\n  window.removeEventListener('keydown', closeModal);\n}\n\nfunction onBackdropHandler(e) {\n  if (e.target.classList.contains('backdrop')) {\n    closeModal();\n  } else if (e.target.classList.contains('js-btn-watched')) {\n    write(e.target.dataset.id, writeWatched);\n  } else if (e.target.classList.contains('js-btn-queue')) {\n    write(e.target.dataset.id, writeQueue);\n  }\n  return;\n}\n\nfunction closeModalEsc(e) {\n  if (e.code === 'Escape') closeModal();\n}\n\nasync function write(filmId, callback) {\n  const user = await currentUser();\n  if (user) {\n    const film = await infoFilmApi.fetchInfoFilm(filmId);\n    callback(user.uid, film);\n  } else {\n    window.location.href = './signin.html';\n  }\n}\n","export function modalInfoCreat(results, id, keyPlayer=false) {\n  let URL_POSTEER = 'https://image.tmdb.org/t/p/';\n  const imgResize = {\n    tabMob: 'w342',\n    desk: 'w500',\n  };\n\n\n  const {\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    genres,\n    overview,\n    poster_path,\n  } = results;\n\n  const player = !keyPlayer ? '' :\n`  <iframe\n  class=\"trailer\"\nwidth=\"350\"\nheight=\"175\"\nsrc=\"https://www.youtube.com/embed/${keyPlayer}?autoplay=1&amp;loop=1\"\ntitle=\"GO-IT  #4\"\nframeborder=\"0\"\nallowfullscreen\n></iframe> `\n\n  return `<picture>\n  <source src=\"${\n    URL_POSTEER + imgResize.desk + poster_path\n  }\" media=\"(min-width: 1280px)\" />\n  <source src=\"${\n    URL_POSTEER + imgResize.tabMob + poster_path\n  }\" media=\"(min-width: 768px)\" />\n  <source src=\"${\n    URL_POSTEER + imgResize.tabMob + poster_path\n  }\" media=\"(max-width: 767px)\" />\n  <img class=\"modal__picture\" src=\"${\n    URL_POSTEER + imgResize.desk + poster_path\n  }\" alt=\"${title}\" />\n  </picture>\n  <div class=\"modal__info\">\n  <h2 class=\"modal__title\">${title}</h2>\n  <table class=\"modal__statistic\">\n  <tbody>\n      <tr>\n          <td class=\"modal__type\">Vote / Votes</td>\n          <td class=\"modal__value\"><span class=\"modal__value--accent\">${vote_average}</span> / \n              <span class=\"modal__value--highlight\">${vote_count}</span></td>\n      </tr>\n      <tr>\n          <td class=\"modal__type\">Popularity</td>\n          <td class=\"modal__value\">${popularity}</td>\n      </tr>\n      <tr>\n          <td class=\"modal__type\">Original Title</td>\n          <td class=\"modal__value modal__value--uppercase\">${original_title}</td>\n      </tr>\n      <tr>\n          <td class=\"modal__type\">Genre</td>\n          <td class=\"modal__value\">${genres.map(e => ` ${e.name}`)}</td>\n      </tr>\n  </tbody>\n  </table>\n  <p class=\"modal__about\">About</p>\n  <p class=\"modal__description\">${overview}</p>\n  \n  <div id=\"player\" class=\"player\">\n${player}\n  </div>\n  \n  <ul class=\"modal__buttons\">\n            <li><button type=\"button\" class=\"modal__button js-btn-watched\" data-id=\"${id}\">Add to watched</button></li>\n            <li><button type=\"button\" class=\"modal__button js-btn-queue\" data-id=\"${id}\">Add to queue</button></li>\n          </ul>\n  `;\n  // loadPlayer();\n  // window.onYouTubePlayerAPIReady = function () {\n  //   onYouTubeIframeAPIReady();\n\n  //           };\n}\n","import FilmotekaApi from '../api-service/filmoteka-api';\nimport { modalInfoCreat } from './modal-creat-element';\nimport { trailer } from './youtubePlayer';\n\nconst infoFilmApi = new FilmotekaApi();\nlet ID_FILMS = '';\n\nconst slideTrack = document.querySelector('.slide-track');\nconst backdrop = document.querySelector('.backdrop');\nconst modalWrap = document.querySelector('.modal__wrap');\nconst modalJsCard = document.querySelector('.js-card');\nconst trailerWrap = document.querySelector('.player');\n\nslideTrack.addEventListener('click', openModal);\nmodalJsCard.addEventListener('click', openModal);\n\nconst langTrailer = {\n  ua: 'uk-UA',\n  en: 'en-US',\n};\n\n// let URL_IMG_POSTER = 'https://image.tmdb.org/t/p/'a\nasync function modalFunction(id) {\n  await infoFilmApi.fetchInfoFilm(id).then(creatRender);\n}\n\nasync function openModal(e) {\n  if (e.target.nodeName !== 'IMG') {\n    return;\n  }\n  modalWrap.innerHTML = '';\n  backdrop.classList.add('is-open');\n  ID_FILMS = e.target.dataset.id;\n  modalFunction(ID_FILMS);\n\n  // console.log(e.target);\n}\n\nasync function creatRender(e) {\n  const trailerKey = await creatTrailerFilm(ID_FILMS);\n  const res = modalInfoCreat(e, ID_FILMS, trailerKey);\n  // console.log(res);\n\n  modalWrap.insertAdjacentHTML('beforeend', res);\n  creatTrailerFilm(ID_FILMS);\n}\n\nasync function creatTrailerFilm(id) {\n  const enTrailer = await infoFilmApi.fetchTrailreFilm(id, langTrailer.en);\n  console.log(enTrailer.results);\n\n  if (enTrailer.results.length == 0) return;\n  return enTrailer.results[0].key;\n\n  // console.log(enTrailer.results[0].key)\n\n  // let key = enTrailer.results[0].key\n  //   const  res =  trailer(key);\n  //   console.log(res)\n  // trailerWrap.innerHTML = res;\n  //   // const ruTrailer = await infoFilmApi.fetchTrailreFilm(id, langTrailer.ru)\n  // //   console.log(uaTrailer)\n  //   console.log(enTrailer)\n  //   const  testArray = [uaTrailer, enTrailer]\n  // //   console.log(testArray)\n  //   const t =  testArray.map(e => e.results.length > 0)\n  // //   console.log(t)\n  //   const dataLanghKeyTrailer = []\n  //   const y =  testArray.forEach(e => {\n  //     if(!e.results.length) return;\n  //     const x =  {\n  // key: e.results[0].key,\n  // lang: e.results[0].iso_639_1,\n  //     }\n  //     console.log(x)\n  //     dataLanghKeyTrailer.push(x)\n  //   })\n  //   console.log(dataLanghKeyTrailer)\n  // if(dataLanghKeyTrailer)  {\n  //  const keyFind =  dataLanghKeyTrailer.find(e => e.lang === 'ua')\n  //  const key = keyFind ? keyFind.key : dataLanghKeyTrailer.key\n  // }\n  // await trailerYouTube()\n  //   window.onYouTubePlayerAPIReady = function () {\n  //    await onYouTubeIframeAPIReady(key);\n  //\n  // };\n}\n"],"names":["$748cc63661bcb727$var$API_KEY","$748cc63661bcb727$var$BASE_URL","$748cc63661bcb727$export$2e2bcd8739ae039","globalFetch","url","fetch","then","response","json","date","this","incrementPage","results","fetchGenres","data","genres","fetchInTrendFilmWithGenres","fetchTrendFilm","genresList","map","movie","release_date","split","genre_ids","id","filter","el","flat","fetchSearchFilmWithGenres","fetchSearchFilm","page","searchQuery","fetchSearchTotalFilm","fetchInfoFilm","movie_id","fetchTrailreFilm","lang","decrementPage","resetPage","query","newQuery","pageNum","newPage","constructor","$d0abfb39d2dca2cf$export$2e2bcd8739ae039","$parcel$interopDefault","parcelRequire","template","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","compiler","main","stack1","fn","program","inverse","noop","useData","$iU1Pc","$28758baff609ad31$export$86973d0a88a2c188","Loading","standard","backgroundColor","svgColor","messageColor","$edc2d604342d41cf$var$refs","sliderContainer","document","querySelector","$edc2d604342d41cf$var$filmotekaApi","$edc2d604342d41cf$export$c7e7a7faf43551fd","$edc2d604342d41cf$var$renderSliderFilms","catch","err","innerHTML","errorUrl","remove","articles","$456515ae8a730326$var$refs","containerList","$456515ae8a730326$var$filmotekaApi","$456515ae8a730326$export$72a29c1d345d108","$456515ae8a730326$var$appendResultsMarkup","$2qgW3","default","$d3f7a0d6318d22ab$var$refs","searchForm","containerWarning","containerWarningResults","$d3f7a0d6318d22ab$var$filmotekaApi","$d3f7a0d6318d22ab$var$appendResultsMarkup","addEventListener","evt","preventDefault","$d3f7a0d6318d22ab$var$clearHomePage","currentTarget","value","textContent","console","log","total_pages","$bZgM4","$36e3eba7cc6e7a89$var$infoFilmApi","$36e3eba7cc6e7a89$var$refs","backdrop","closeBtn","$36e3eba7cc6e7a89$var$closeModal","classList","window","removeEventListener","async","$36e3eba7cc6e7a89$var$write","filmId","callback","user","currentUser","film","uid","location","href","$1767c8aac551d4e1$export$5c6e77e98c856fad","keyPlayer","URL_POSTEER","imgResize","title","vote_average","vote_count","popularity","original_title","overview","poster_path","player","e","target","contains","dataset","$cqQ1z","writeWatched","writeQueue","code","$9b9e80240baec446$var$infoFilmApi","$9b9e80240baec446$var$ID_FILMS","$9b9e80240baec446$var$slideTrack","$9b9e80240baec446$var$backdrop","$9b9e80240baec446$var$modalWrap","$9b9e80240baec446$var$modalJsCard","$9b9e80240baec446$var$openModal","$9b9e80240baec446$var$langTrailer","nodeName","add","$9b9e80240baec446$var$creatRender","$9b9e80240baec446$var$modalFunction","trailerKey","$9b9e80240baec446$var$creatTrailerFilm","res","insertAdjacentHTML","enTrailer","length","key"],"version":3,"file":"index.d785f73f.js.map"}